# 地址分类
|-|IPv6|IPv4|
|-|-|-|
| 地址分类 |全球单播 |IPv4的公网|
||唯一本地 |IPv4的私网|
||链路本地|IPv4中也有对应，就是169.254.x.x|
|其他对应地址|::1|127.0.0.1|
||::|0.0.0.0|

注释：**链路本地地址**通常是计算机网络中一类特殊的地址， 它仅供于在**网段**，仅仅可以在同一个**二层**内通信（帧广播域）

# 如何获取地址
|-|地址生成方式|
|-|-|
|IPv6|手工指定，dhcp分配，自动生成|
|IPv4|手工指定，dhcp分配|


# 已知3层IP，转化为2层MAC
|-|实现协议|如何寻找未缓存MAC的主机|
|-|-|-|
|IPv6|NP/NPD|根据已知目标IP地址，生成一个**多播地址**，向该地址发送请求解析包**NS**（Neighbor Discovery Protocol），至于路由器如何寻找目标主机的MAC地址，需要理解**多播原理**，路由器返回**NA**（Neighbor Advertisement）
|IPv4|ARP|发送带源主机IP地址，源MAC地址，目标IP地址的ARP广播帧

# IPv6多播简介
IPv6多播首先有要有一个多播地址，  
假设有A主机，a多播地址，  
A想要加入a多播组时，**A**需要发送**主机成员报告**给多播路由器，包含IP地址与MAC地址，无需回复，A就可加入a多播组。
当有数据发送给多播组时，路由器转发该IP包给所有组内主机，  
**多播路由器**周期性发送**主机成员查询**，确保某多播组内还有主机，若多播组内已经没有主机，则多播路由器不在转发该多播组的ip包。
**A**想要退出a组时，需要发送**离开组**的消息  



# IPv6格式
```sh
2409:8a0c:3a50:8a0:34ec:35f0:cc8e:8d41/64 
# 4*4*8 一个16进制数4位，一个组4个数，一共8个组
# /64 表示64位前缀,与IPv4中的 /24 等相同

```
# 如何配置本地链路地址
随机或者根据MAC地址生成

# SLAAC与DHCPv6
## SLAAC (Stateless address autoconfiguration)
1. 主机配置链路本地地址；
2. 主机检查地址是否唯一，即主机对（暂时）地址执行重复地址检测（DAD）；
3. 主机发送路由器请求消息 (**RS**) ；
4. 在接收路由器通告（**RA**）后，**主机自己**为接收的路由器通告中的**每个前缀**配置一个或多个暂时IPv6地址；
5. 主机检查地址是否唯一，即对暂时地址执行DAD；
6. 如果地址是唯一的，它通常会成为“首选”地址，可以积极用于网络通信。

## DHCPv6
客服端唤醒 **Solicit**，发送链路组播，发现DHCPv6服务器（所有），携带自己相关信息  
服务器通告 **Advertise**，通过单播方式，提供给客户端 IPv6地址  
客户端请求 **Request**, 发送链路组播，告知服务器（所有）自己的选择  
服务器回应 **Reply**，通过单播方式，确认分配或者回收地址  




